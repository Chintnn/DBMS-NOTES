# üìö **SQL Functions - Detailed Guide**  

---

## üìù **Introduction to SQL Functions**  
SQL functions are built-in methods provided by SQL to **manipulate data items** and **return results**. They play a crucial role by enabling efficient data processing and analysis. SQL functions can be categorized into several types:  

- üìä **Aggregate Functions**  
- üî¢ **Numeric Functions**  
- üî§ **String Functions**  
- üîÑ **Conversion Functions**  
- üìÖ **Date Functions**  

---

## üìä **Aggregate Functions**  
Aggregate functions perform calculations on a set of values and return a **single value**. They are often used with the **GROUP BY** clause to summarize data in a library system, such as calculating the average book price, finding the total number of books, or determining the highest-priced book.

Key aggregate functions include:  

- üßÆ **AVG()**: Calculates Average Value  
- üìâ **MIN()**: Calculates Minimum Value  
- üìà **MAX()**: Calculates Maximum Value  
- üî¢ **COUNT()**: Calculates Total Count 
- üí≤ **SUM()**: Calculates Total Sum  

---

### üßÆ **1. AVG() Function (Average Function)**  
The **AVG()** function calculates the **average value** of a numeric column. In a library system, it can be used to find the **average price** of books.  

#### **Syntax:**  
```sql
SELECT AVG(column_name) FROM table_name;
```  

#### **Example:**  
Calculate the **average price** of books in the library:  
```sql
SELECT AVG(Price) AS "Average Book Price" FROM BOOKS;
```  

#### **Advanced Example:**  
Find the books that are **priced higher** than the **average book price**:  
```sql
SELECT BookName, Price 
FROM BOOKS
WHERE Price > (SELECT AVG(Price) FROM BOOKS);
```  

---

### üìâ **2. MIN() Function (Minimum Value Function)**  
The **MIN()** function returns the **smallest value** in the specified column. It can be used to find the **cheapest book** in the library.  

#### **Syntax:**  
```sql
SELECT MIN(column_name) FROM table_name;
```  

#### **Example:**  
Find the **minimum price** of books in the library:  
```sql
SELECT MIN(Price) AS "Cheapest Book Price" FROM BOOKS;
```  

#### **Practical Use Case:**  
To find the **book name** and **price** of the **cheapest book**:  
```sql
SELECT BookName, Price 
FROM BOOKS 
WHERE Price = (SELECT MIN(Price) FROM BOOKS);
```  

---

### üìà **3. MAX() Function (Maximum Value Function)**  
The **MAX()** function retrieves the **largest value** of the selected column. It is useful for finding the **most expensive book** in the library.  

#### **Syntax:**  
```sql
SELECT MAX(column_name) FROM table_name;
```  

#### **Example:**  
Find the **maximum price** of books:  
```sql
SELECT MAX(Price) AS "Most Expensive Book Price" FROM BOOKS;
```  

#### **Advanced Query:**  
To find the **book name** and **price** of the **most expensive book**:  
```sql
SELECT BookName, Price 
FROM BOOKS 
WHERE Price = (SELECT MAX(Price) FROM BOOKS);
```  

---

### üî¢ **4. COUNT() Function (Count Rows Function)**  
The **COUNT()** function returns the **number of rows** that match a specified criterion. It is widely used in the library system to **count books, authors, or issued books**.  

#### **Syntax:**  
```sql
SELECT COUNT(column_name) FROM table_name;

-- Count all rows
SELECT COUNT(*) FROM table_name;

-- Count distinct values
SELECT COUNT(DISTINCT column_name) FROM table_name;
```  

#### **Examples:**  
1. Count the **total number of books** in the library:  
```sql
SELECT COUNT(*) AS "Total Books" FROM BOOKS;
```

2. Count the **number of distinct authors** in the library:  
```sql
SELECT COUNT(DISTINCT AuthorID) AS "Number of Authors" FROM WRITES;
```

3. Count the **books available** in the library under a specific price:  
```sql
SELECT COUNT(BookID) AS "Affordable Books" 
FROM BOOKS 
WHERE Price < 1000;
```  

---

### ‚ûï **5. SUM() Function (Summation Function)**  
The **SUM()** function returns the **total sum** of a numeric column. It is useful in the library system for **calculating total sales, total book prices, or the sum of issued book prices**.  

#### **Syntax:**  
```sql
SELECT SUM(column_name) FROM table_name;
```  

#### **Example:**  
Calculate the **total value of all books** in the library:  
```sql
SELECT SUM(Price) AS "Total Value of Books" FROM BOOKS;
```  

#### **Use Case in Library Management:**  
Find the **total revenue** generated by issued books:  
```sql
SELECT SUM(Price) AS "Total Issued Books Value" 
FROM BOOKS B 
JOIN ISSUE I ON B.BookID = I.BookID;
```  

---

## üéØ **Summary Table of Aggregate Functions**  

| üßÆ **Function** | **Description**                                   | **Syntax**                                 | **Library System Example**                                         |
|-----------------|---------------------------------------------------|-------------------------------------------|-------------------------------------------------------------------|
| **AVG()**      | Returns the **average** of a numeric column.       | `SELECT AVG(column_name) FROM table_name;` | `SELECT AVG(Price) AS "Average Book Price" FROM BOOKS;`            |
| **MIN()**      | Returns the **smallest value** in a column.        | `SELECT MIN(column_name) FROM table_name;` | `SELECT MIN(Price) AS "Cheapest Book Price" FROM BOOKS;`           |
| **MAX()**      | Returns the **largest value** in a column.         | `SELECT MAX(column_name) FROM table_name;` | `SELECT MAX(Price) AS "Most Expensive Book Price" FROM BOOKS;`     |
| **COUNT()**    | Counts the **number of rows** that match criteria. | `SELECT COUNT(column_name) FROM table_name;` | `SELECT COUNT(*) AS "Total Books" FROM BOOKS;`                     |
| **SUM()**      | Returns the **total sum** of a numeric column.     | `SELECT SUM(column_name) FROM table_name;` | `SELECT SUM(Price) AS "Total Value of Books" FROM BOOKS;`          |

---

## üéØ **Key Takeaways for Exam Preparation - Aggregate Functions**  

---

### ‚úÖ **Understanding Aggregate Functions:**  
- Aggregate functions perform **calculations on data sets** and return **single aggregated values**.  
- Commonly used in **reporting**, **data analysis**, and **summarizing large datasets** in SQL.  
- Frequently used with **GROUP BY**, **HAVING**, and **JOIN** clauses for **advanced queries**.  

---

### üìå **When to Use Specific Aggregate Functions:**  

| üßÆ **Function** | **Best Use Cases in Library Management System**                                           |
|-----------------|--------------------------------------------------------------------------------------------|
| **AVG()**      | Calculate the **average price** of books or **average fine** for late returns.              |
| **MIN()**      | Find the **cheapest book**, **earliest issue date**, or **minimum fine**.                   |
| **MAX()**      | Identify the **most expensive book**, **latest return date**, or **maximum fine**.          |
| **COUNT()**    | Count the **total number of books**, **issued books**, or **distinct authors**.             |
| **SUM()**      | Calculate the **total book value**, **total fine collected**, or **sum of issued book prices**. |  

---

### üõ†Ô∏è **Pro Tips for Exams:**  
- **AVG, MIN, MAX, SUM**: Use with **numeric columns** for **financial and statistical analysis**.  
- **COUNT**: Works with **all data types**, including **DISTINCT** values.  
- Combine with **WHERE** to filter results, **GROUP BY** to aggregate data, and **HAVING** for **post-group filtering**.  
- Be mindful of using **NULL values** in aggregate functions.  
  - **COUNT(*)** includes **NULLs**, while **COUNT(column_name)** does **not**.  
- **Aliasing** columns with **AS** helps present **clear output** in results.  

---

### üí° **Example Scenario for Exams:**  
*"How would you find the **average book price** in the library and list books **above this average price**?"*  

```sql
SELECT BookName, Price 
FROM BOOKS 
WHERE Price > (SELECT AVG(Price) FROM BOOKS);
```

---

### üöÄ **Advanced Query Tip:**  
- Use **aggregate functions** with **JOINs** to calculate data across **related tables**.  
- Example: Calculate **total fines collected** by department:  

```sql
SELECT D.DepartmentName, SUM(I.FineAmount) AS "Total Fines"
FROM DEPARTMENT D
JOIN STUDENT S ON D.DepartmentID = S.DepartmentID
JOIN ISSUE I ON S.StudentID = I.MemberID
GROUP BY D.DepartmentName;
```

---

### üìñ **Why Aggregate Functions Matter in the Library System:**  
- üìä **Data Analysis:** Calculate **total books issued**, **average book prices**, and **member statistics**.  
- üìà **Financial Management:** Determine **total fines collected** and **average late fees**.  
- üßÆ **Inventory Management:** Count **available copies of books** and **identify shortages**.  
- üîç **User Insights:** Analyze **borrowing patterns** and **popular genres** using **statistical aggregates**.  
